---
# Test JSON list/array support in tavern-go (sync with tavern-py bdeb7c7)
test_name: "Test JSON array validation"

stages:
  # Test 1: Response body as array - validate array elements
  - name: "Get array response from JSONPlaceholder"
    request:
      url: "https://jsonplaceholder.typicode.com/users"
      method: "GET"
    response:
      status_code: 200
      body:
        - id: 1
          name: "Leanne Graham"
          username: "Bret"
          email: "Sincere@april.biz"
        - id: 2
          name: "Ervin Howell"
          username: "Antonette"

---
# Test array validation with posts
test_name: "Test JSON array partial validation"

stages:
  - name: "Get posts array and validate first two elements"
    request:
      url: "https://jsonplaceholder.typicode.com/posts"
      method: "GET"
      params:
        _limit: "3"
    response:
      status_code: 200
      body:
        - userId: 1
          id: 1
        - userId: 1
          id: 2
